## å¸¦ğŸ”´æ ‡è®°çš„é…ç½®é¡¹ä¸ºä¸€èˆ¬ä»£ç†è½¯ä»¶å¼ºåˆ¶è¦†å†™çš„é¡¹ç›®ï¼Œéœ€è¦åœ¨ä»£ç†è½¯ä»¶é…ç½®ç›¸åº”é¡¹ç›®

## å…¥ç«™ç«¯å£é…ç½® ---------------------------------------------------------------------------------------------------
mixed-port: 7890 # HTTP+Socks4æ··åˆï¼ŒWinä¸‹çš„ç³»ç»Ÿä»£ç†ç«¯å£
socks-port: 1080 # Socks5ï¼Œä»£ç†ç«¯å£
port: 8080 # HTTPï¼Œä»£ç†ç«¯å£
#redir-port: 7891  #ğŸ”´élinuxç³»ç»Ÿæ— æ•ˆï¼Œredir é€æ˜ä»£ç†ç«¯å£
#tproxy-port: 7892  #ğŸ”´élinuxç³»ç»Ÿæ— æ•ˆï¼Œtproxy é€æ˜ä»£ç†ç«¯å£

## å…¨å±€é…ç½® ------------------------------------------------------------------------------------------------
mode: rule # ruleï¼ˆè§„åˆ™ï¼‰/ globalï¼ˆå…¨å±€ï¼‰/ directï¼ˆç›´è¿ï¼‰
allow-lan: true # å…è®¸å±€åŸŸç½‘è¿æ¥
bind-address: "*" #ğŸ”´ç›‘å¬çš„æœ¬åœ°ç½‘å¡åœ°å€ï¼Œ*ä¸ºå…¨éƒ¨
log-level: warning # æ—¥å¿—çº§åˆ«
ipv6: true # æ˜¯å¦æ¥å—ipv6æµé‡
tcp-concurrent: true # TCPå¹¶å‘
#interface-name: en0  # clashæµé‡å‡ºç«™æ¥å£ï¼Œå³æ¥å£ç»‘å®š
find-process-mode: strict # è¿›ç¨‹åŒ¹é…ï¼ˆoff:å…³é—­ï¼Œalwas:å¼€å¯ï¼Œstrictè‡ªåŠ¨ï¼‰ï¼Œtunæ¨¡å¼ä¸‹æ— æ•ˆ
#lan-allowed-ips: # å…è®¸è¿æ¥çš„å®¢æˆ·ç«¯IPï¼Œé»˜è®¤å…è®¸å…¨éƒ¨
#- 0.0.0.0/0
#- ::/0
#lan-disallowed-ips: # ç¦æ­¢è¿æ¥çš„IPï¼Œä¼˜å…ˆçº§é«˜äºallowç™½åå•
#- ~
#authentication: # http(s)/socks/mixed çš„ç”¨æˆ·éªŒè¯ï¼Œæ ¼å¼ï¼š"user1:pass1"ï¼Œä¸å†™åˆ™ç¦æ­¢å…¨éƒ¨ç”¨æˆ·
#- ~
#skip-auth-prefixes: # ç™½åå•ï¼Œå…è®¸è·³è¿‡ç”¨æˆ·éªŒè¯çš„IP
#- ~
#unified-delay: false # ç»Ÿä¸€å»¶è¿Ÿè®¡ç®—ï¼Œæ²¡å•¥åµç”¨ï¼Œå°±æ˜¯ç•Œé¢å¥½çœ‹ï¼Œä¼šå¯¹å»¶è¿Ÿè‡ªåŠ¨é€‰æ‹©ç­–ç•¥é€ æˆå½±å“
#routing-mark: 6666  # élinuxæ— æ•ˆï¼Œè·¯ç”±æ ‡è®°ï¼Œä¸ºæµé‡æä¾›æ ‡è®°ä»¥ä¾›å…¶ä»–åº”ç”¨è¿›è¡Œæµé‡å¤„ç†

## TCP-KeepA-liveé…ç½® ------------------------------------------------------------------------------------------
keep-alive-idle: 30 # è§¦å‘å¿ƒè·³åŒ…çš„é“¾è·¯æ— æ´»åŠ¨é˜ˆå€¼ï¼Œæ— æ´»åŠ¨åå‘é€å¿ƒè·³åŒ…æ£€æµ‹å¯¹ç«¯æ˜¯å¦å­˜æ´»
keep-alive-interval: 30 # å‘é€å¿ƒè·³åŒ…çš„é—´éš”ï¼Œæ— å›åº”åˆ™æœ€å¤šé‡å‘9æ¬¡ååˆ¤æ–­é“¾è·¯å…³é—­
disable-keep-alive: false # ç¦ç”¨ keep aliveï¼Œå³å…è®¸é•¿é“¾æ¥ä¸€ç›´å­˜åœ¨ï¼Œç›®å‰å®‰å“ç«¯å¼ºåˆ¶true

## APIé¢æ¿è®¾ç½®---------------------------------------------------------------------------------------------------
external-controller: 0.0.0.0:9090 #ğŸ”´APIé¢æ¿ç›‘å¬åœ°å€
secret: "hd54RIm0LiUpyu" #ğŸ”´APIé¢æ¿è®¿é—®å¯†é’¥
external-ui: ./ui #ğŸ”´APIé¢æ¿é™æ€èµ„æºè·¯å¾„
external-ui-name: zashboard # APIé¢æ¿åï¼Œé…åˆè·¯å¾„æ‹¼æ¥æˆè·¯å¾„ï¼Œä¾‹å¦‚/ui/metacubexd
external-ui-url: "https://ghfast.top/https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip" # APIé¢æ¿ä¸‹è½½åœ°å€

## å¤–éƒ¨èµ„æºä¸‹è½½è®¾ç½®---------------------------------------------------------------------------------------------------
global-client-fingerprint: random # å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹ï¼Œä¼˜å…ˆçº§ä½äºå…¶ä»–å¤„çš„å£°æ˜
global-ua: mihomo # å…¨å±€UAï¼Œé»˜è®¤ä¸ºclash.meta
etag-support: true # èµ„æºä¸‹è½½çš„ ETag æ”¯æŒ
geodata-mode: true # GEOIPæ•°æ®æ¨¡å¼ï¼Œfalse:mmdbï¼Œtrue:datï¼Œmmdbæ›´æ–°ä½†æœ‰è®¾å¤‡ä¸æ”¯æŒ
geodata-loader: standard # GEOæ–‡ä»¶åŠ è½½æ¨¡å¼ï¼Œé»˜è®¤memconservativeï¼ˆå°å†…å­˜è®¾å¤‡æ¨¡å¼ï¼Œå³åˆ†æ®µåŠ è½½geoæ•°æ®è€Œä¸æ˜¯å…¨éƒ¨åŠ è½½ï¼‰
geo-auto-update: true # GEOæ–‡ä»¶è‡ªåŠ¨æ›´æ–°
geo-update-interval: 24 # æ›´æ–°é—´éš”ï¼Œå°æ—¶
geox-url: # GEOæ•°æ®åº“ä¸‹è½½åœ°å€ï¼Œå†…æ ¸ä¼šæŒ‰éœ€ä¸‹è½½ï¼Œæœªè¢«ä½¿ç”¨çš„æ•°æ®åº“ä¸ä¼šè¢«ä¸‹è½½
  geoip: "https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb"
  asn: "https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"

## ç¼“å­˜è®¾ç½®
profile:
  store-selected: true # ç¼“å­˜ APIé¢æ¿ å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©
  store-fake-ip: true # ç¼“å­˜ fakeip æ˜ å°„è¡¨

## fakeipä¸‹çš„DNSè®¾ç½®---------------------------------------------------------------------------------------------------
# å®¢æˆ·ç«¯å‘èµ·ç½‘å€Açš„DNSï¼Œåˆ°è¾¾mihomoçš„DNSæ¨¡å—ï¼Œmihomoä¼šä½¿ç”¨ä¸‹æ–¹çš„é…ç½®è¿›è¡ŒDNS
# å½“fakeipä¸ºé»‘åå•æ¨¡å¼æ—¶ï¼ŒæœªåŒ¹é…åˆ°filterçš„åŸŸåå°†ç›´æ¥è¿”å›fakeip
# åŒ¹é…åˆ°fakeipçš„åŸŸåå°†ä¼šä½¿ç”¨redir-hostæ¨¡å¼è¿›è¡Œå¸¸è§„è§£æï¼Œå¾—åˆ°IPåè¿”å›ç»™å®¢æˆ·ç«¯
# å®¢æˆ·ç«¯æ‹¿åˆ°IPåï¼Œå†æ¬¡å¯¹IPå‘èµ·è¿æ¥è¯·æ±‚ï¼Œæ­¤æ—¶è¯·æ±‚ä¼šè¿›å…¥mihomoçš„è§„åˆ™åŒ¹é…ï¼Œæ ¹æ®åŒ¹é…ç»“æœç›´è¿æˆ–è€…è¿œç«¯è§£æ
# ä¹Ÿå°±æ˜¯è¯´DNSè§£æå®é™…ä¸Šä¼šå‘ç”Ÿä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡çš„ç»“æœå¹¶ä¸é‡è¦ï¼Œç¬¬äºŒæ¬¡åªè¦è§„åˆ™æ­£ç¡®è§¦å‘è¿œç¨‹è§£æï¼Œç»ä¸ä¼šæ±¡æŸ“å’ŒåŠ«æŒ
# ä½†å¦‚æœç¬¬ä¸€æ¬¡æ‹¿åˆ°äº†0.0.0.0,127.0.0.1è¿™æ ·çš„é”™è¯¯IPï¼Œè¯·æ±‚æ— æ³•å‘ç»™mihomoå°±ä¼šæ— æ³•è®¿é—®
# ç»¼ä¸Šæ‰€è¿°ï¼Œé…ç½®DNSæ²¡æœ‰é‚£ä¹ˆé‡è¦ï¼Œåªè¦ä¿è¯é¦–æ¬¡è§£æä¸è¦å¾—åˆ°0.0.0.0è¿™æ ·çš„é”™è¯¯IPå³å¯
# ä½†æ˜¯å¦‚æœä¸€å®šè¦è¦æ±‚è®¿é—®å›½å¤–åŸŸåDNSæ— æ³„æ¼ï¼Œæˆ–è€…éœ€è¦å¯¹å›½å¤–è¿›è¡Œåˆ†æµï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨fakeipæ¨¡å¼
# å› ä¸ºfakeipæ¨¡å¼ä¸‹ï¼Œå›½å¤–åŸŸåå…¨éƒ¨æ˜¯fakeipå¹¶æœªè¿›è¡Œæœ¬åœ°è§£æï¼Œè€Œä¸”å›½å¤–åŸŸåå†…ç½‘å…¨éƒ¨ä½¿ç”¨fakeipæ®µï¼Œæ–¹ä¾¿åˆ†æµ

public-dns: &public-dns # å¿«é€Ÿçš„DNSï¼Œä¸å…³å¿ƒæ˜¯å¦å­˜åœ¨æ±¡æŸ“å’ŒåŠ«æŒï¼Œåªè¦å¿«å°±å¥½äº†
  - dhcp://wan # æŒ‡å®šç½‘å¡DHCPè·å–çš„DNSï¼Œç¡¬è·¯ç”±çš„wanå£ç½‘å¡åä¸€èˆ¬ä¸ºwan
  - dhcp://eth1 # è½¯è·¯ç”±çš„wanå£ä¸€èˆ¬ä¸ºæœ€åä¸€å¼ ç½‘å¡ï¼Œeth0,eth1 åŒç½‘å£å°±æ˜¯eth1
  - 223.5.5.5 # é˜¿é‡Œä¸»DNS

secure-dns: &secure-dns # åŠ å¯†çš„DNSï¼Œå¿…é¡»é¿å…è¢«è§£æä¸º0.0.0.0ç­‰æ±¡æŸ“
  - https://223.5.5.5/dns-query#h3=true # é˜¿é‡Œä¸»DNSï¼Œæ”¯æŒH3

dns:
  enable: true #ğŸ”´å¯ç”¨dnsæ¨¡å—ï¼Œå¦åˆ™é‡‡ç”¨ç³»ç»ŸDNS
  listen: 0.0.0.0:1053 #ğŸ”´DNSç›‘å¬ç«¯å£ï¼Œä»…æ”¯æŒudp
  enhanced-mode: fake-ip #ğŸ”´DNSå¤„ç†æ¨¡å¼ï¼šredir-host/fake-ipï¼Œfake-ipæ›´å¿«ä½†å¯èƒ½å¼•å…¥é—®é¢˜ï¼ˆç¼“å­˜fakeipåæ— æ³•æ•…éšœåˆ‡æ¢ï¼‰
  cache-algorithm: lru # DNSç¼“å­˜ç®—æ³•ï¼Œlruï¼ˆé»˜è®¤ï¼‰ç­–ç•¥å°½å¯èƒ½ç¼“å­˜æ›´å¤šæ¡ç›®ï¼Œarcç­–ç•¥åˆ™æ˜¯åŠ¨æ€è°ƒæ•´ç¼“å­˜
  prefer-h3: true # DoHè‹¥æ”¯æŒåˆ™ä¼˜å…ˆä½¿ç”¨HTTP/3
  ipv6: true # æ˜¯å¦è§£æipv6åœ°å€ï¼Œå¦åˆ™è¿”å›ç©ºç»“æœ
  use-hosts: true # æŸ¥è¯¢é…ç½®æ–‡ä»¶ä¸­çš„ hosts
  use-system-hosts: true # æŸ¥è¯¢ç³»ç»Ÿçš„ hosts
  #respect-rules: false # DNSè¯·æ±‚éµå¾ªè·¯ç”±è§„åˆ™ï¼Œéœ€å…ˆé…ç½®å¥½ proxy-server-nameserverï¼Œå¦åˆ™å‡ºç°é¸¡è›‹é—®é¢˜
  # fakeipé…ç½®æ®µ
  fake-ip-range: 198.18.0.1/16 #ğŸ”´fakeip çš„ IP æ®µï¼Œtunæ¥å£çš„é»˜è®¤ IPV4 åœ°å€ ä¹Ÿä½¿ç”¨æ­¤å€¼ä½œä¸ºå‚è€ƒ
  fake-ip-filter-mode: blacklist # é»‘/ç™½åå•æ¨¡å¼ï¼Œé»‘åå•ä¸‹ï¼Œfilterå†…å®¹å°†ä½¿ç”¨redir-hostæ¨¡å¼è§£æ
  fake-ip-filter: # fakeipè¿‡æ»¤ï¼Œä»¥ä¸‹åŸŸåå°†ä½¿ç”¨redir-hostæ¨¡å¼ï¼Œå¡«å…¥æ— éœ€ä»£ç†çš„å†…å®¹
    - "rule-set:ğŸŒDirect-FISH" # ä¸ªäººæ”¶é›†ç›´è¿åŸŸåï¼Œä¸èƒ½ç›´æ¥ç”¨GEOSITEå¼•ç”¨çš„é›¶æ•£åŸŸå
    - "geosite:category-ads-all" # å¹¿å‘ŠåŸŸå
    - "geosite:cn" # cnå¯è®¿é—®åŸŸåï¼Œä¸ºäº†å…¼å®¹V2rayçš„cnæ ‡å¿—ï¼ŒåŒ…æ‹¬geolocation-cnå’Œtld-cn
    - "geosite:private" # ç§æœ‰åœ°å€ï¼ŒåŒ…æ‹¬stunï¼Œlanï¼Œè·¯ç”±å™¨åå°ç½‘å€ç­‰åŸŸå
    - "geosite:apple" # è‹¹æœåŸŸå
    - "geosite:win-update" # å¾®è½¯æ›´æ–°åŸŸå
    - "geosite:sharepoint" # å¾®è½¯å•†ä¸šç‰ˆonedrive
    - "geosite:tailscale" # tailscaleåŸŸå
    - "geosite:tracker" # trackeråŸŸåï¼Œæœ€å¥½ä¸è¦åŠ ptç«™åŸŸåï¼ŒCFåŠ é€Ÿå®¹æ˜“æ— æ³•è®¿é—®
    - "geosite:synology" # ç¾¤æ™–åŸŸå
    - "geosite:category-ntp" # NTPåŸŸå
  # redir-hosté…ç½®æ®µ
  default-nameserver: *secure-dns # è§£æDNSæœåŠ¡å™¨åŸŸåçš„DNSï¼Œå¯ä»¥åŠ å¯†ä½†å¿…é¡»ä¸ºIPï¼Œå¦‚æœä¸ç”¨DNSæœåŠ¡å™¨çš„åŸŸååˆ™æ— éœ€é…ç½®
  proxy-server-nameserver: *secure-dns # è§£æä»£ç†èŠ‚ç‚¹åŸŸåçš„DNSï¼Œä¸å¡«åˆ™éµå¾ªnamepolicy
  direct-nameserver: *public-dns # è§£ædirectç»„çš„DNSï¼Œä¸å¡«åˆ™éµå¾ªnamepolicy
  #direct-nameserver-follow-policy: false # directä»£ç†ç»„æ˜¯å¦éµå¾ªnameserver-policyï¼Œfalseåˆ™ç›´æ¥ä½¿ç”¨direct-nameserver
  nameserver-policy: # ä¼˜å…ˆçº§é«˜äºnameserver
    "geosite:category-ads-all": rcode://success # åŒ¹é…å¹¿å‘ŠåŸŸåï¼Œè¿”å›ç©ºç»“æœ
  nameserver: *public-dns # å…œåº•é»˜è®¤DNSç»„ï¼Œæœªå‘½ä¸­ nameserver-policy æ—¶å¯ç”¨
  # fallback: # è¿‡æ—¶çš„é…ç½®ï¼Œå·²è¢« nameserver-policy å–ä»£ï¼Œä½¿ç”¨æ—¶ä¼šäº§ç”ŸDNSæ³„éœ²

## hostsè®¾ç½®---------------------------------------------------------------------------------------------------
hosts:
  "mihomo.mihomo": 127.0.0.1

## å—…æ¢è®¾ç½®---------------------------------------------------------------------------------------------------
sniffer: # å—…æ¢ï¼Œè·å–SNIä¸­çš„åŸŸåï¼Œä½¿mihomoèƒ½å¤Ÿåè§£æœªç»è‡ªå·±DNSçš„IPè¯·æ±‚çš„åŸŸåï¼Œæ¥åŒ¹é…åŸŸåè§„åˆ™
  enable: true # å¯ç”¨sniffer
  force-dns-mapping: true # å¯¹redir-hostç±»å‹è¯†åˆ«çš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  parse-pure-ip: true # å¯¹æ‰€æœ‰æœªè·å–åˆ°åŸŸåçš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  override-destination: true # æ˜¯å¦ä½¿ç”¨å—…æ¢ç»“æœä½œä¸ºå®é™…è®¿é—®ï¼Œé»˜è®¤ä¸º true
  sniff: # éœ€è¦å—…æ¢çš„åè®®ç±»å‹ï¼Œä»…æ”¯æŒ HTTP/TLS/QUIC
    TLS: # TLSåè®®
      ports: # ç«¯å£ç™½åå•ï¼Œåªé’ˆå¯¹ä¸‹åˆ—ç«¯å£å—…æ¢
        - 443
        - 8443
    HTTP: # HTTPåè®®
      ports: # ç«¯å£ç™½åå•ï¼Œåªé’ˆå¯¹ä¸‹åˆ—ç«¯å£å—…æ¢
        - 80
        - 8080-8880
    QUIC: # QUICåè®®
      ports: # ç«¯å£ç™½åå•ï¼Œåªé’ˆå¯¹ä¸‹åˆ—ç«¯å£å—…æ¢
        - 443
        - 8443
  force-domain: # å¼ºåˆ¶å—…æ¢çš„åŸŸå
    - "+.netflix.com"
    - "+.nflxvideo.net"
    - "+.amazonaws.com"
    - "+.media.dssott.com"
  skip-domain: # éœ€è¦è·³è¿‡å—…æ¢çš„åŸŸåï¼Œä¸»è¦è§£å†³éƒ¨åˆ†ç«™ç‚¹sniå­—æ®µéåŸŸåï¼Œå¯¼è‡´å—…æ¢ç»“æœå¼‚å¸¸çš„é—®é¢˜ï¼Œå¦‚ç±³å®¶è®¾å¤‡
    - "+.apple.com"
    - Mijia Cloud
    - dlg.io.mi.com
    - "+.oray.com"
    - "+.sunlogin.net"
    - geosite:cn
  #skip-src-address: # éœ€è¦è·³è¿‡å—…æ¢çš„æºåœ°å€
  #skip-dst-address: # éœ€è¦è·³è¿‡å—…æ¢çš„ç›®çš„åœ°å€

## tunè®¾ç½®---------------------------------------------------------------------------------------------------
tun:
  enable: true #ğŸ”´å¯ç”¨Tunæ¥å£
  stack: mixed # TUN å †æ ˆæ¨¡å¼,å»ºè®® mixedï¼ˆTCPï¼šsystemï¼ŒUDPï¼šGvisorï¼‰ï¼Œå¯¹äºWindowså¼€å¯é˜²ç«å¢™åéœ€è¦æ‰‹åŠ¨æ”¾è¡Œå†…æ ¸ï¼Œå¦åˆ™åªèƒ½ä½¿ç”¨Gvisor
  device: utun0 #ğŸ”´TUN ç½‘å¡åï¼ŒMacOS åªèƒ½ utun å¼€å¤´
  auto-route: true # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œè‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿› tun
  auto-detect-interface: true # è‡ªåŠ¨é€‰æ‹©æµé‡çš„å‡ºæ¥å£ï¼ˆé»˜è®¤wanå£ï¼‰
  dns-hijack: # dns åŠ«æŒï¼Œå°†åŒ¹é…åˆ°çš„è¿æ¥å¯¼å…¥å†…éƒ¨ dns æ¨¡å—ï¼Œä¸ä¹¦å†™åè®®åˆ™é»˜è®¤ udp://
    - any:53
    - tcp://any:53
  mtu: 9000 # MTU
  gso: true # é€šç”¨åˆ†æ®µå¸è½½ï¼Œä»…æ”¯æŒLinuxï¼Œæé«˜æ€§èƒ½
  gso-max-size: 65536 # é€šç”¨åˆ†æ®µå¸è½½åŒ…çš„æœ€å¤§é•¿åº¦
  exclude-package: # å®‰å“æ’é™¤çš„åŒ…å
    - com.tencent.mobileqq # QQ
    - com.tencent.mm # å¾®ä¿¡
    - com.tencent.androidqqmail # QQé‚®ç®±
    - com.xingin.xhs # å°çº¢ä¹¦
    - idm.internet.download.manager # 1DMä¸‹è½½å™¨
    - com.sausage.download # æµ©å…‹ä¸‹è½½
    - com.eg.android.AlipayGphone # æ”¯ä»˜å®
    - com.sgcc.wsgw.cn # ç½‘ä¸Šå›½ç½‘
    - com.taobao.taobao # æ·˜å®
    - com.jingdong.app.mall # äº¬ä¸œ
    - com.MobileTicket # é“è·¯12306
    - com.chinamworld.main # ä¸­å›½å»ºè®¾é“¶è¡Œ
    - com.jd.jrapp # äº¬ä¸œé‡‘è
  #auto-redirect: true # ä»…Linuxæœ‰æ•ˆï¼Œè‡ªåŠ¨é…ç½® iptables/nftables ä»¥é‡å®šå‘ TCP è¿æ¥ï¼Œéœ€è¦auto-route: true
  #strict-route: false # å°†æ‰€æœ‰è¿æ¥è·¯ç”±åˆ° tun æ¥é˜²æ­¢æ³„æ¼ï¼Œä½†ä½ çš„è®¾å¤‡å°†æ— æ³•å…¶ä»–è®¾å¤‡è¢«è®¿é—®ï¼Œä¸¥é‡æ‹–æ…¢Windowsè®¿é—®é€Ÿåº¦ï¼Œå¯èƒ½é€ æˆè™šæ‹Ÿæœºè¿è¡Œå¼‚å¸¸
  #endpoint-independent-nat: false # ç‹¬ç«‹äºç«¯ç‚¹çš„ NATï¼Œæ€§èƒ½å¯èƒ½ä¸‹é™ï¼Œä¸å»ºè®®ä¸éœ€è¦æ—¶å¼€å¯

## ä»£ç†æä¾›è€…è®¾ç½®---------------------------------------------------------------------------------------------------
proxy-providers-general: &proxy-providers-general # ä»£ç†æä¾›è€…é€šç”¨é…ç½®
  type: http # ç±»å‹ï¼Œå¯é€‰http/file/inline
  interval: 86400 # æ›´æ–°é—´éš”ï¼Œå•ä½ç§’
  proxy: ğŸŒé»˜è®¤ç›´è¿ # httpç±»å‹æ›´æ–°æ—¶ä½¿ç”¨çš„ä»£ç†ç»„ï¼Œä¸å»ºè®®è®¾ç½®ä»£ç†ï¼Œå¦‚æœä½ çš„æœºåœºéœ€è¦ä»£ç†æ‰èƒ½è®¢é˜…ï¼Œé‚£å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹ï¼Ÿ
  size-limit: 0 # æ–‡ä»¶å¤§å°é™åˆ¶ï¼Œ0ä¸ºä¸é™åˆ¶
  #exclude-filter: "(?i)å®˜ç½‘|æ¯æœˆåˆ·æ–°è®¢é˜…|æœºåœº|åˆ°æœŸ|https://|å‰©ä½™æµé‡"
  override:
    tfo: false # å¯ç”¨TCP Fast Openï¼Œä¸€èˆ¬éƒ½ä¸æ”¯æŒ
    mptcp: false # å¯ç”¨TCP Multi Pathï¼Œä¸€èˆ¬éƒ½ä¸æ”¯æŒ
    udp: true # å¯ç”¨UDP
    udp-over-tcp: false # å¯ç”¨UDP over TCP
    skip-cert-verify: false # è·³è¿‡è¯ä¹¦éªŒè¯
    #down: "50 Mbps" # ä¸‹è¡Œé™é€Ÿ
    #up: "10 Mbps" # ä¸Šè¡Œé™é€Ÿ
    ip-version: dual # å¯é€‰dual/ipv4/ipv6/ipv4-prefer/ipv6-preferï¼Œå³ä¼˜å…ˆv4æˆ–v6ï¼Œä»…v4æˆ–v6

proxy-providers:
  #â—providerå ä½1
  #â—providerå ä½2
  #â—providerå ä½3
  #â—providerå ä½4

## ä»£ç†ç»„è®¾ç½®---------------------------------------------------------------------------------------------------
use-all-proxy-providers: &use-all-proxy-providers # ä»£ç†ç»„é€šç”¨é…ç½®
  use:
    #â—use-providerå ä½1
    #â—use-providerå ä½2
    #â—use-providerå ä½3
    #â—use-providerå ä½4

health-check-general: &health-check-general # ä»£ç†ç»„å¥åº·æ£€æŸ¥é€šç”¨é…ç½®
  <<: *use-all-proxy-providers
  url: http://www.gstatic.com/generate_204
  interval: 30 # å¥åº·æ£€æŸ¥é—´éš”
  tolerance: 600 # å»¶è¿Ÿå®¹å¿åº¦ï¼Œå•ä½ms
  lazy: true # æœªé€‰ä¸­å½“å‰ç»„æ—¶ä¸è¿›è¡Œæµ‹è¯•
  timeout: 5000 # å¥åº·æ£€æŸ¥è¶…æ—¶ï¼Œå•ä½ms
  max-failed-times: 5 # å¤±è´¥æ¬¡æ•°ï¼Œè¶…è¿‡åˆ™æ‰§è¡Œä¸€æ¬¡å¼ºåˆ¶å¥åº·æ£€æŸ¥

default-proxy: &default-proxy # é»˜è®¤ä»£ç†ç»„
  proxies:
    - âœ…é»˜è®¤ä»£ç†
    - â™»ï¸å»¶è¿Ÿæœ€ä½
    - âš ï¸æ•…éšœåˆ‡æ¢
    - ğŸ–ï¸æ‰‹åŠ¨åˆ‡æ¢
    - ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡¨ğŸ‡³å°æ¹¾èŠ‚ç‚¹
    - ğŸ‡¸ğŸ‡¬ç‹®åŸèŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹
    - ğŸ‡ºğŸ‡²ç¾å›½èŠ‚ç‚¹
    - DIRECT

default-direct: &default-direct # é»˜è®¤ç›´è¿ç»„
  proxies:
    - DIRECT
    - âœ…é»˜è®¤ä»£ç†
    - â™»ï¸å»¶è¿Ÿæœ€ä½
    - âš ï¸æ•…éšœåˆ‡æ¢
    - ğŸ–ï¸æ‰‹åŠ¨åˆ‡æ¢
    - ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡¨ğŸ‡³å°æ¹¾èŠ‚ç‚¹
    - ğŸ‡¸ğŸ‡¬ç‹®åŸèŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹
    - ğŸ‡ºğŸ‡²ç¾å›½èŠ‚ç‚¹

proxy-groups:
  ##################################
  - name: â™»ï¸å»¶è¿Ÿæœ€ä½
    type: url-test
    <<: *health-check-general

  - name: âš ï¸æ•…éšœåˆ‡æ¢
    type: fallback
    <<: *health-check-general

  - name: ğŸ–ï¸æ‰‹åŠ¨åˆ‡æ¢
    type: select
    <<: *use-all-proxy-providers

  ##################################
  - name: âœ…é»˜è®¤ä»£ç†
    type: select
    proxies:
      - â™»ï¸å»¶è¿Ÿæœ€ä½
      - âš ï¸æ•…éšœåˆ‡æ¢
      - ğŸ–ï¸æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡²ç¾å›½èŠ‚ç‚¹
      - DIRECT

  - name: ğŸŒé»˜è®¤ç›´è¿
    type: select
    <<: *default-direct

  - name: ğŸŸæ¼ç½‘ä¹‹é±¼
    type: select
    <<: *default-direct

  ##################################
  - name: â“‚ï¸å¾®è½¯Copilot
    type: select
    <<: *default-proxy
    icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/Microsoft_365_Copilot.png

  - name: â£OpenAi
    type: select
    <<: *default-proxy
    icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/Chat_GPT.png

  - name: âœˆï¸Telegram
    type: select
    <<: *default-proxy
    icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/Telegram.png

  - name: ğŸ§±GFW
    type: select
    <<: *default-proxy
    icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/GFW.png

  - name: ğŸ“ºå·´å“ˆå§†ç‰¹
    type: select
    proxies:
      - ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³å°æ¹¾èŠ‚ç‚¹
    icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/å·´å“ˆå§†ç‰¹.png

  - name: ğŸ®Steam
    type: select
    <<: *default-direct
    icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/Steam.png

  - name: â“‚ï¸å¾®è½¯æœåŠ¡
    type: select
    <<: *default-direct
    icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/Microsoft.png

  - name: ğŸ”PTç½‘ç«™
    type: select
    <<: *default-proxy
    icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/PT.png

  ##################################
  - name: ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    <<: *health-check-general
    filter: "æ¸¯|HK|hk|Hong Kong|HongKong|hongkong"

  - name: ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    <<: *health-check-general
    filter: "æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan"

  - name: ğŸ‡ºğŸ‡²ç¾å›½èŠ‚ç‚¹
    type: url-test
    <<: *health-check-general
    filter: "ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States"

  - name: ğŸ‡¨ğŸ‡³å°æ¹¾èŠ‚ç‚¹
    type: url-test
    <<: *health-check-general
    filter: "å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan"

  - name: ğŸ‡¸ğŸ‡¬ç‹®åŸèŠ‚ç‚¹
    type: url-test
    <<: *health-check-general
    filter: "æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore"

## è§„åˆ™æä¾›è€…è®¾ç½®---------------------------------------------------------------------------------------------------
rule-providers-general: &rule-providers-general
  type: http
  behavior: classical
  interval: 86400

rule-providers:
  â™»ï¸å»¶è¿Ÿæœ€ä½-FISH:
    <<: *rule-providers-general
    url: https://raw.githubusercontent.com/refined-fish/clash_rule_fish/refs/heads/main/Ruleset/â™»ï¸å»¶è¿Ÿæœ€ä½-FISH.yaml
    path: ./providers/rule/rule-provider_â™»ï¸å»¶è¿Ÿæœ€ä½-FISH.yaml

  ğŸŒDirect-FISH:
    <<: *rule-providers-general
    url: https://raw.githubusercontent.com/refined-fish/clash_rule_fish/refs/heads/main/Ruleset/ğŸŒDirect-FISH.yaml
    path: ./providers/rule/rule-provider_ğŸŒDirect-FISH.yaml

  â“‚ï¸å¾®è½¯Copilot-FISH:
    <<: *rule-providers-general
    url: https://raw.githubusercontent.com/refined-fish/clash_rule_fish/refs/heads/main/Ruleset/â“‚ï¸å¾®è½¯Copilot-FISH.yaml
    path: ./providers/rule/rule-provider_â“‚ï¸å¾®è½¯Copilot-FISH.yaml

## è·¯ç”±è§„åˆ™è®¾ç½®---------------------------------------------------------------------------------------------------
rules:
  #### å¯¹äºå¿…é¡»ç›´è¿è€…ç›´æ¥ä½¿ç”¨directå†™æ­»ï¼Œå…¶ä»–å°½å¯èƒ½ä½¿ç”¨ä»£ç†ç»„ä»¥æ–¹ä¾¿é¢æ¿æ§åˆ¶ä»¥åŠåˆ‡æ¢æµ‹è¯•
  # FISHè‡ªå®šä¹‰è§„åˆ™å—
  - RULE-SET,â™»ï¸å»¶è¿Ÿæœ€ä½-FISH,âœ…é»˜è®¤ä»£ç† # FISHè‡ªå®šä¹‰ä»£ç†
  - RULE-SET,ğŸŒDirect-FISH,ğŸŒé»˜è®¤ç›´è¿ # FISHè‡ªå®šä¹‰ç›´è¿

  # ç¦ç”¨QUICï¼Œé˜²æ­¢é€Ÿåº¦ä¸ä½³å’ŒIPæ³„éœ²ï¼Œä¸åŒ…æ‹¬å›½å†…
  - AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(NOT,((GEOSITE,cn))),REJECT
  - AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(NOT,((GEOIP,CN))),REJECT

  # å¹¿å‘Šæ‹¦æˆªä¸ç§æœ‰åœ°å€ç»•è¿‡å—
  - GEOIP,private,DIRECT,no-resolve # ç§æœ‰åœ°å€ç›´è¿
  - GEOSITE,private,DIRECT # ç§æœ‰åœ°å€ç›´è¿

  #### ä»£ç†è§„åˆ™å—ï¼ŒæŒ‰ç…§ä½¿ç”¨é¢‘ç‡/è§„åˆ™é›†å¤§å°æ’åº
  # å…¶ä»–
  - GEOSITE,tailscale,DIRECT # å¿…é¡»ç›´è¿ï¼Œå¦åˆ™tailscaleä»£ç†æ‰“æ´
  - GEOSITE,tracker,DIRECT # å¿…é¡»ç›´è¿ï¼Œå¦åˆ™BTç›´è¿ä»£ç†ä¸‹è½½
  - GEOSITE,category-pt,ğŸ”PTç½‘ç«™ # CFåŠ é€Ÿçš„ç«™ç‚¹å®¹æ˜“æ— æ³•è®¿é—®ï¼Œä½†éœ€è¦æ³¨æ„ä¸‹è½½ä»£ç†é—®é¢˜
  - GEOSITE,tmdb,âœ…é»˜è®¤ä»£ç† # TMDBæœåŠ¡ï¼Œå½±è§†åˆ®å‰Šï¼Œç›´è¿è®¿é—®ç¼“æ…¢ç»å¸¸å¤±è´¥
  # å¾®è½¯ç›¸å…³
  - GEOSITE,win-update,â“‚ï¸å¾®è½¯æœåŠ¡ # å¾®è½¯æ›´æ–°åŸŸå
  - GEOSITE,sharepoint,ğŸŒé»˜è®¤ç›´è¿ # å¾®è½¯å•†ä¸šç‰ˆonedrive
  - RULE-SET,â“‚ï¸å¾®è½¯Copilot-FISH,â“‚ï¸å¾®è½¯Copilot # å¾®è½¯copilotæœåŠ¡
  - GEOSITE,synology,ğŸŒé»˜è®¤ç›´è¿ # ç¾¤æ™–æœåŠ¡ï¼ŒåŒ…æ‹¬QC
  # openAIç›¸å…³
  - GEOSITE,openai,â£OpenAi # OpenAiæœåŠ¡
  # telegramç›¸å…³
  - GEOSITE,telegram,âœˆï¸Telegram # TelegramæœåŠ¡
  - GEOIP,telegram,âœˆï¸Telegram,no-resolve # TelegramæœåŠ¡IP
  # ç¼–ç¨‹ç›¸å…³
  - GEOSITE,category-container,âœ…é»˜è®¤ä»£ç† # å„ç§å®¹å™¨æœåŠ¡
  - GEOSITE,python,âœ…é»˜è®¤ä»£ç† # PythonæœåŠ¡ï¼Œä¾‹å¦‚pipç›´è¿ä¸‹è½½è¾ƒæ…¢
  # å…¶ä»–
  - GEOSITE,bahamut,ğŸ“ºå·´å“ˆå§†ç‰¹ # å·´å“ˆå§†ç‰¹æœåŠ¡
  - GEOSITE,category-porn,âœ…é»˜è®¤ä»£ç† # XæœåŠ¡

  #### å…œåº•è§„åˆ™å—ï¼Œä¸€èˆ¬ç²¾ç»†çš„åˆ†æµè§„åˆ™åº”åœ¨å…¶ä¸Š
  - GEOSITE,gfw,ğŸ§±GFW # GFWå…œåº•
  - GEOSITE,microsoft,â“‚ï¸å¾®è½¯æœåŠ¡ # å¾®è½¯æœåŠ¡ï¼Œæ”¾äºGFWåæ˜¯å› ä¸ºgithubç­‰åœ¨GFWä¸­éœ€è¦ä»£ç†
  - GEOSITE,steam,ğŸ®Steam # Steamï¼Œé»˜è®¤ç›´è¿ï¼Œæ¢åŒºæ—¶ä¿®æ”¹æ­¤å¤„ï¼Œæ”¾äºGFWä¹‹åæ˜¯å› åˆ›æ„å·¥åŠéœ€å§‹ç»ˆä»£ç†
  - GEOSITE,cn,ğŸŒé»˜è®¤ç›´è¿ # ä¸­å›½åŸŸå
  - GEOIP,cn,ğŸŒé»˜è®¤ç›´è¿,no-resolve # ä¸­å›½IP
  - MATCH,ğŸŸæ¼ç½‘ä¹‹é±¼ # æ¼ç½‘ä¹‹é±¼
